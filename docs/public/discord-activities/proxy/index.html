<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-discord-activities/proxy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">üõ°Ô∏è Discord Proxy | Robo.js</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.roboplay.dev/discord-activities/proxy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="üõ°Ô∏è Discord Proxy | Robo.js"><meta data-rh="true" name="description" content="Learn how to make external network requests in your Discord Activity in a way compatible with the Discord Proxy."><meta data-rh="true" property="og:description" content="Learn how to make external network requests in your Discord Activity in a way compatible with the Discord Proxy."><meta data-rh="true" property="og:image" content="https://preview.robojs.dev?path=/discord-activities/proxy"><meta data-rh="true" name="twitter:image" content="https://preview.robojs.dev?path=/discord-activities/proxy"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.roboplay.dev/discord-activities/proxy"><link data-rh="true" rel="alternate" href="https://docs.roboplay.dev/discord-activities/proxy" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.roboplay.dev/discord-activities/proxy" hreflang="x-default"><script src="https://plausible.io/js/script.js" defer="defer" data-domain="docs.roboplay.dev"></script><link rel="stylesheet" href="/assets/css/styles.e82d4075.css">
<script src="/assets/js/runtime~main.4b949662.js" defer="defer"></script>
<script src="/assets/js/main.af58f57a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Sage Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Sage Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Robo.js</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/getting-started">Docs</a><a class="navbar__item navbar__link" href="/hosting/overview">Hosting</a><a class="navbar__item navbar__link" href="/playground">Playground</a><a class="navbar__item navbar__link" href="/plugins/directory">Plugins</a><a class="navbar__item navbar__link" href="/templates/overview">Templates</a><a href="https://dev.to/waveplay" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://roboplay.dev/discord" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord"></a><a href="https://github.com/Wave-Play/robo.js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div id="docsearch"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Start Here</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/getting-started">‚ú® Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Core Concepts</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cli/overview">CLI Tools</a><button aria-label="Expand sidebar category &#x27;CLI Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/robojs/overview">Core Package</a><button aria-label="Expand sidebar category &#x27;Core Package&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hosting/overview">Hosting</a><button aria-label="Expand sidebar category &#x27;Hosting&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/plugins/overview">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Building Apps</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/discord-activities/getting-started">Discord Activities</a><button aria-label="Collapse sidebar category &#x27;Discord Activities&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/discord-activities/getting-started">‚ú® Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/discord-activities/proxy">üõ°Ô∏è Discord Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/discord-activities/multiplayer">‚öîÔ∏è Multiplayer</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/discord-bots/getting-started">Discord Bots</a><button aria-label="Expand sidebar category &#x27;Discord Bots&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Ecosystem</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/Wave-Play/robo.js/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Contributing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://roboplay.dev/discord" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Discord Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/plugins/directory">Plugin Directory</a><button aria-label="Expand sidebar category &#x27;Plugin Directory&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/templates/overview">Templates</a><button aria-label="Expand sidebar category &#x27;Templates&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/discord-activities/getting-started"><span itemprop="name">Discord Activities</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">üõ°Ô∏è Discord Proxy</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>üõ°Ô∏è Discord Proxy</h1>
<p><strong><a href="/discord-activities/client">Client</a></strong> network requests made by your <strong>Discord Activity</strong> are &quot;sandboxed&quot; through <strong><a href="https://discord.com/developers/docs/activities/development-guides#activity-proxy-considerations" target="_blank" rel="noopener noreferrer">Discord&#x27;s Proxy</a></strong>.</p>
<p>That means you cannot directly make network requests to <strong><a href="/discord-activities/proxy#external-resources">external URLs</a></strong> from it for security reasons. You may have seen this if you&#x27;ve tried using iframes. There are also <strong><a href="/discord-activities/proxy#network-limitations">limitations</a></strong> to what network protocols you can use.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="content-security-policy-csp">Content Security Policy (CSP)<a class="hash-link" aria-label="Direct link to Content Security Policy (CSP)" title="Direct link to Content Security Policy (CSP)" href="/discord-activities/proxy#content-security-policy-csp">‚Äã</a></h2>
<p>Ever tried to load a URL from an external resource and got a <code>blocked:csp</code> error? That&#x27;s the <strong>Discord Proxy</strong> doing its job.</p>
<p><strong><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" target="_blank" rel="noopener noreferrer">Content Security Policy (CSP)</a></strong> is a security feature that helps prevent <strong><a href="https://owasp.org/www-community/attacks/xss/" target="_blank" rel="noopener noreferrer">cross-site scripting (XSS)</a></strong> attacks. It restricts what can load, such as scripts, styles, and images. <strong>Discord</strong> trusts only you <strong><a href="https://discord.com/developers/docs/activities/development-guides#exceptions" target="_blank" rel="noopener noreferrer">and itself</a></strong>. It will throw <strong>CSP</strong> errors at everyone else.</p>
<p>It may be a pain, but it&#x27;s for your own good.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fetching-external-resources">Fetching External Resources<a class="hash-link" aria-label="Direct link to Fetching External Resources" title="Direct link to Fetching External Resources" href="/discord-activities/proxy#fetching-external-resources">‚Äã</a></h2>
<p>You can friend the <strong>Discord Proxy</strong> by using <strong><a href="/discord-activities/proxy#url-mapping">URL Mappings</a></strong>, <strong><a href="https://github.com/discord/embedded-app-sdk/blob/main/patch-url-mappings.md" target="_blank" rel="noopener noreferrer">patching URLs</a></strong>, or <strong><a href="/discord-activities/proxy#proxying-requests">proxying requests</a></strong>.</p>
<div class="row cardContainer"><a href="https://discord.com/developers/applications" target="_blank" rel="noopener noreferrer" class="col col--6 nodecor margin-bottom--lg"><div class="card padding--lg cardContent"><h4 class="text--truncate cardTitle">üîó Discord Developer Portal</h4><p class="text--truncate cardDescription">Find it under your app&#x27;s URL Mappings.</p></div></a></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="url-mapping">URL Mapping<a class="hash-link" aria-label="Direct link to URL Mapping" title="Direct link to URL Mapping" href="/discord-activities/proxy#url-mapping">‚Äã</a></h3>
<p>Mapping URLs is a way to tell the <strong>Discord Proxy</strong> to allow certain external resources. You can map a URL to a specific path in the <strong><a href="https://discord.com/developers/applications" target="_blank" rel="noopener noreferrer">Discord Developer Portal</a></strong>. This is the recommended way to allow external resources you need in your <strong>Discord Activity</strong>.</p>
<p>Let&#x27;s say you need to load something from <strong><a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub</a></strong>. You can map it to a path like <code>/github</code> and <code>/assets</code>.</p>
<div class="beforeAfter"><p class="beforeAfterContent">/github</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" class="beforeAfterArrow"><title>arrow-down-bold</title><path d="M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"></path></svg><p class="beforeAfterContent">https://github.com</p></div>
<div class="beforeAfter"><p class="beforeAfterContent">/assets</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" class="beforeAfterArrow"><title>arrow-down-bold</title><path d="M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"></path></svg><p class="beforeAfterContent">https://raw.githubusercontent.com/Wave-Play/robo.js/main</p></div>
<p>This configuration maps URLs you can use in your activity like so:</p>
<div class="beforeAfter"><p class="beforeAfterContent">/github/Wave-Play/robo.js</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" class="beforeAfterArrow"><title>arrow-down-bold</title><path d="M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"></path></svg><p class="beforeAfterContent">https://github.com/Wave-Play/robo.js</p></div>
<div class="beforeAfter"><p class="beforeAfterContent">/assets/README.md</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" class="beforeAfterArrow"><title>arrow-down-bold</title><path d="M9,4H15V12H19.84L12,19.84L4.16,12H9V4Z"></path></svg><p class="beforeAfterContent">https://raw.githubusercontent.com/Wave-Play/robo.js/main/README.md</p></div>
<p></p>
<p>And voila, you can now load those URLs in your <strong>Discord Activity</strong> using the mapped paths.</p>
<div class="language-HTML language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">iframe</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">/assets/README.md</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">iframe</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/assets/docs/static/img/logo.png&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can reference it as a path or <strong><a href="https://discord.com/developers/docs/activities/development-guides#construct-a-full-url" target="_blank" rel="noopener noreferrer">construct a full URL</a></strong>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Don&#x27;t actually use GitHub as a CDN</div><div class="admonitionContent_BuS1"><p>GitHub is not a CDN. Connect <strong><a href="https://roboplay.dev" target="_blank" rel="noopener noreferrer">your host</a></strong> to a CDN like <strong><a href="https://www.cloudflare.com" target="_blank" rel="noopener noreferrer">Cloudflare</a></strong> or <strong><a href="https://bunny.net/" target="_blank" rel="noopener noreferrer">Bunny.net</a></strong> for your assets.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="url-patching">URL Patching<a class="hash-link" aria-label="Direct link to URL Patching" title="Direct link to URL Patching" href="/discord-activities/proxy#url-patching">‚Äã</a></h3>
<p>Mapping is great if you have control over the paths used, <em>but what if you don&#x27;t?</em> You know, like when using third-party libraries with hardcoded URLs. You can use the <strong><a href="https://github.com/discord/embedded-app-sdk/" target="_blank" rel="noopener noreferrer">Embedded App SDK</a></strong> for that!</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> patchUrlMappings </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@discord/embedded-app-sdk&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">patchUrlMappings</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">prefix</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/foo&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;foo.com&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively, you can use a post-install utility like <strong><a href="https://www.npmjs.com/package/patch-package" target="_blank" rel="noopener noreferrer">patch-package</a></strong> or fork the library to use mapped URLs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxying-requests">Proxying Requests<a class="hash-link" aria-label="Direct link to Proxying Requests" title="Direct link to Proxying Requests" href="/discord-activities/proxy#proxying-requests">‚Äã</a></h3>
<p>As a last resort, you can proxy requests through your <strong>Web Server</strong>. This is useful when you need to make requests to a specific port or handle requests that the <strong>Discord Proxy</strong> can&#x27;t, but it&#x27;s not always the best solution.</p>
<p>Creating your own proxy is easy. Just create a file in <code>/src/api</code> called <code>proxy.js</code> with the following code:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	</span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Modify as you see fit to validate requests. You can use it like so inside your <strong>Activity Client</strong>:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">Player</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">url</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">&#x27;/api/proxy?url=&#x27;</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript operator" style="color:rgb(255, 121, 198)">+</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)"> </span><span class="token tag script language-javascript maybe-class-name" style="color:rgb(255, 121, 198)">ExternalUrl</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code basically has your <strong>Web Server</strong> to fetch the data and send it back to your <strong>Activity Client</strong>.</p>
<p>While this method is effective for bypassing <strong>CSP</strong> restrictions, it does introduce additional latency because your server has to fetch the resource before serving it back to the activity. This may impact the performance of your activity, especially for large files or high traffic, so make sure your <strong><a href="https://docs.roboplay.dev/discord-activities/hosting" target="_blank" rel="noopener noreferrer">Hosting Service</a></strong> can handle it.</p>
<p>Be aware of potential security risks when using a proxy server, such as <strong><a href="https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html" target="_blank" rel="noopener noreferrer">URL Injections</a></strong> and <strong><a href="https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_(SSRF)" target="_blank" rel="noopener noreferrer">SSRF (Server-Side Request Forgery)</a></strong> attacks. Always use Discord&#x27;s <strong>URL Mapping</strong> whenever possible.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations" href="/discord-activities/proxy#security-considerations">‚Äã</a></h2>
<p>The <strong>Discord Proxy</strong> hides the user&#x27;s IP address and blocks URLs from known <strong><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener noreferrer">malicious endpoints</a></strong>. This ensures the safety of the user&#x27;s data and privacy. However, it also means that you need to be careful when handling external resources.</p>
<p>Don&#x27;t trust info coming from the <strong>Embedded App SDK</strong> as truth. There could be an impostor among us. Call the Discord API directly from your app&#x27;s <strong><a href="/discord-activities/server">Web Server</a></strong> with the <strong>OAuth2</strong> token you received during <strong><a href="/discord-activities/auth">Authentication</a></strong> if you need information that&#x27;s not sus.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Sanitize Your Inputs</div><div class="admonitionContent_BuS1"><p>Always sanitize user inputs such as usernames and channel names. You never know what might try to sneak in.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-limitations">Network Limitations<a class="hash-link" aria-label="Direct link to Network Limitations" title="Direct link to Network Limitations" href="/discord-activities/proxy#network-limitations">‚Äã</a></h2>
<p>Want to use <strong><a href="https://webrtc.org/" target="_blank" rel="noopener noreferrer">WebRTC</a></strong> or <strong><a href="https://w3c.github.io/webrtc-quic/" target="_blank" rel="noopener noreferrer">WebTransport</a></strong>? Sorry, you can&#x27;t. <strong><a href="https://discord.com/developers/docs/activities/development-guides#activity-proxy-considerations" target="_blank" rel="noopener noreferrer">For now</a></strong>, at least.</p>
<p>The <strong>Discord Proxy</strong> does <em>not</em> support the following:</p>
<ul>
<li><strong><a href="https://developers.cloudflare.com/fundamentals/reference/network-ports/#network-ports-compatible-with-cloudflares-proxy" target="_blank" rel="noopener noreferrer">Some iframe ports</a></strong></li>
<li><strong><a href="https://developers.cloudflare.com/workers/platform/known-issues/#custom-ports" target="_blank" rel="noopener noreferrer">URL Mapping external ports</a></strong></li>
<li><strong><a href="https://webrtc.org" target="_blank" rel="noopener noreferrer">WebRTC</a></strong></li>
<li><strong><a href="https://web.dev/webtransport" target="_blank" rel="noopener noreferrer">WebTransport</a></strong></li>
</ul>
<p>You&#x27;ll be fine if you stick to <strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" target="_blank" rel="noopener noreferrer">WebSockets</a></strong> or <strong><a href="https://developer.mozilla.org/en-US/docs/Glossary/HTTPS" target="_blank" rel="noopener noreferrer">HTTPS</a></strong>, as well as some protocols built on them like <strong><a href="https://developer.mozilla.org/en-US/docs/Web/Media/Audio_and_video_delivery/Setting_up_adaptive_streaming_media_sources#mpeg-dash_encoding" target="_blank" rel="noopener noreferrer">DASH</a></strong> or <strong><a href="https://developer.mozilla.org/en-US/docs/Web/Media/Audio_and_video_delivery/Setting_up_adaptive_streaming_media_sources#hls_encoding" target="_blank" rel="noopener noreferrer">HLS</a></strong> for streaming.</p>
<p>Need to make a request to a specific port? Have your <strong>Web Server</strong> handle it by <strong><a href="/discord-activities/proxy#proxying-requests">proxying the request</a></strong>. That won&#x27;t always work on iframes, though. You may need to virtualize the source and livestream it from your server but that has its own limitations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a class="hash-link" aria-label="Direct link to Additional Resources" title="Direct link to Additional Resources" href="/discord-activities/proxy#additional-resources">‚Äã</a></h2>
<div class="row cardContainer"><a href="https://discord.com/developers/docs/activities/development-guides#activity-proxy-considerations" target="_blank" rel="noopener noreferrer" class="col col--6 nodecor margin-bottom--lg"><div class="card padding--lg cardContent"><h4 class="text--truncate cardTitle">üîó Discord Developer Docs</h4><p class="text--truncate cardDescription">Learn more about the Discord Proxy.</p></div></a><a href="https://dev.to/waveplay/resolve-content-security-policy-csp-issues-in-your-discord-activity-using-a-nodejs-proxy-2634" target="_blank" rel="noopener noreferrer" class="col col--6 nodecor margin-bottom--lg"><div class="card padding--lg cardContent"><h4 class="text--truncate cardTitle">üìö Resolve CSP Issues with a Proxy</h4><p class="text--truncate cardDescription">A guide on how to set up a proxy to bypass CSP issues.</p></div></a></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Wave-Play/robo.js/edit/main/docs/docs/discord-activities/proxy.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-07-06T03:08:02.000Z" itemprop="dateModified">Jul 6, 2024</time></b> by <b>Pkmmte Xeleon</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/discord-activities/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">‚ú® Getting Started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/discord-activities/multiplayer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">‚öîÔ∏è Multiplayer</div></a></nav><footer class="footer"><img src="/img/logo.png" alt="Robo.js Logo" width="55" height="55"><p>MIT ¬© <!-- -->2024<!-- --> <strong>Robo.js</strong> By <strong>WavePlay</strong></p></footer></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#content-security-policy-csp">Content Security Policy (CSP)</a></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#fetching-external-resources">Fetching External Resources</a><ul><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#url-mapping">URL Mapping</a></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#url-patching">URL Patching</a></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#proxying-requests">Proxying Requests</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#security-considerations">Security Considerations</a></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#network-limitations">Network Limitations</a></li><li><a class="table-of-contents__link toc-highlight" href="/discord-activities/proxy#additional-resources">Additional Resources</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>